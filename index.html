<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Breakout Raj</title>

  <!-- Mobile-friendly viewport (fixed syntax) -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

  <!-- Your stylesheet -->
  <link href="breakout.css" rel="stylesheet" />

  <!-- Farcaster Mini App embed metadata (used when the URL is shared in Farcaster clients) -->
  <meta name="fc:miniapp" content='{
    "version":"1",
    "imageUrl":"https://block-breaker-seven.vercel.app/image.png",
    "button":{
      "title":"BLOCK BREAKER",
      "action":{
        "type":"launch_frame",
        "name":"PLAY",
        "url":"https://block-breaker-seven.vercel.app",
        "splashImageUrl":"https://block-breaker-seven.vercel.app/splash.png",
        "splashBackgroundColor":"#100E09"
      }
    }
  }' />
  <!-- (Optional backward-compatibility) -->
  <meta name="fc:frame" content='{
    "version":"1",
    "imageUrl":"https://block-breaker-seven.vercel.app/image.png",
    "button":{
      "title":"BLOCK BREAKER",
      "action":{
        "type":"launch_frame",
        "name":"PLAY",
        "url":"https://block-breaker-seven.vercel.app",
        "splashImageUrl":"https://block-breaker-seven.vercel.app/splash.png",
        "splashBackgroundColor":"#100E09"
      }
    }
  }' />
</head>

<body>
  <div id="breakout">
    <canvas id="canvas">
      <div class="unsupported">
        Sorry, this example cannot be run because your browser does not support the &lt;canvas&gt; element
      </div>
    </canvas>

    <div id="levels">
      <img id="next" class="disabled" src="images/up.png"   title="next level">
      <img id="prev" class="disabled" src="images/down.png" title="previous level">
      <span id="label">level:</span><span id="level"></span>
    </div>

    <div id="controls">
      <input id="sound" type="checkbox" />
      <label for="sound">sound</label>
    </div>

    <div id="instructions" style="display:none;">
      <div class="keyboard">
        <b>space</b> to start<br>
        <b>left/right</b> to move paddle<br>
        <b>up/down</b> to change level
      </div>
      <div class="touch">
        <b>touch here</b> to start<br>
        <b>drag</b> paddle to move<br>
      </div>
    </div>
  </div>

  <!-- Your game scripts -->
  <script src="game.js"></script>
  <script src="breakout.js"></script>
  <script src="levels.js"></script>

  <!-- Farcaster Mini App SDK -->
  <script type="module">
    import { sdk } from 'https://esm.sh/@farcaster/miniapp-sdk';

    // Tell the host we're ready as soon as the DOM + game boot are ready.
    // This hides the host's loading screen in Mini-App environments.
    document.addEventListener('DOMContentLoaded', () => {
      // Start your game
      // (Assumes Game and Breakout are defined by your included scripts)
      if (window.Game && typeof Game.ready === 'function') {
        Game.ready(function () {
          Game.start('canvas', Breakout);
          // After the canvas is initialized, notify Mini App host
          sdk.actions.ready({ disableNativeGestures: true });
        });
      } else {
        // Fallback: still mark ready so host doesn't hang on loading
        sdk.actions.ready({ disableNativeGestures: true });
      }
    });
  </script>
</body>
</html>
